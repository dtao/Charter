window.HighTables={};HighTables.charts={};$(document).ready(function(){Highcharts.setOptions({credits:{enabled:!!HighTables.includeHighchartsLinks}});var b={LineChart:{line:{},spline:{chart:{type:"spline"}},area:{chart:{type:"area"}},stack:{chart:{type:"area"},plotOptions:{area:{stacking:"normal"}}}},BarChart:{bar:{},column:{chart:{type:"column"}},},PieChart:{pie:{}}};function d(f,h,g){$(f).each(function(){h.renderTo(this,g)})}function c(f,h,g){$(f).each(function(){h.renderFromTable(this,g)})}function a(h,f){for(var g in f){d("."+g+"-chart",h,f[g]);c("table.render-to-"+g+"-chart",h,f[g])}}function e(){for(var f in b){a(HighTables[f],b[f])}}e()});HighTables.Parse=function(){function b(c){return parseFloat(c.replace(/^\$|,/g,""))}function a(e){var d=[];for(var c=0;c<e.length;++c){d.push(parseInt(e[c]))}return d}return{number:b,integers:a}}();HighTables.Base=function(b){b=$(b);var i;var g;var f;var d={options:function(j){return e(j)},title:function(j){return{title:{text:j}}},"x-interval":function(j){return{xAxis:{tickInterval:parseInt(j)}}},"x-min":function(j){return{xAxis:{min:parseInt(j)}}},"y-interval":function(j){return{yAxis:{tickInterval:parseInt(j)}}},"y-min":function(j){return{yAxis:{min:parseInt(j)}}}};function e(k){var l=k.split(".");var j=window;while(l.length>0){j=j[l.shift()]}return(typeof j==="function")?j():j}function a(){var j={};var l;for(var k in d){l=b.attr("data-"+k);if(l){$.extend(j,d[k](l))}}return $.extend(j,{labelColumn:h(),valueColumns:c()})}function h(){return parseInt(b.attr("data-label-column"))}function c(){var j=b.attr("data-value-columns");if(j){return HighTables.Parse.integers(j.split(","))}else{return null}}this.options=function(){if(!i){i=a();i.labelColumn=this.labelColumn();i.valueColumns=this.valueColumns()}return i};this.labelColumn=function(){if(typeof g==="undefined"){g=h()}return g};this.valueColumns=function(){if(typeof f==="undefined"){f=c()}return f};this.element=b};HighTables.Table=function(c){$.extend(this,new HighTables.Base(c));var f=this.element;var d;var h;var e;var g;var a;function b(i,j){if(j){return HighTables.Parse.number(i.text())}else{return i.text()}}this.getOrCreateChart=function(){if(!d){d=$("<div>").addClass("chart");d.attr("id","chart-"+$(".chart").length+1);d.insertBefore(f)}return d};this.firstRow=function(){if(!h){h=f.find("tr:first")}return h};this.bodyRows=function(){if(!e){e=f.find("tr:gt(0)")}return e};this.columnCount=function(){if(!g){g=this.firstRow().find("th").length}return g};this.rowCount=function(){if(!a){a=f.find("tr").length}return a};this.getColumnHeader=function(i){return this.firstRow().find("th:nth-child("+(i+1)+")").text()};this.getColumnData=function(j,i){i=i||{numeric:true};return this.bodyRows().map(function(){var k=$(this).find("td:nth-child("+(j+1)+")");return b(k,i.numeric)})};this.getRowHeader=function(i){return f.find("tr:nth-child("+(i+1)+")").find("td:first").text()};this.getRowData=function(j,i){i=i||{numeric:true};return f.find("tr:nth-child("+(j+1)+")").find("td:gt(0):not(.exclude-from-chart),th:gt(0):not(.exclude-from-chart)").map(function(){return b($(this),i.numeric)})}};HighTables.Chart=function(a){$.extend(this,new HighTables.Base(a));var b=this.element;var c;this.getTable=function(){if(!c){c=$(b.attr("data-source"))}return c}};HighTables.LineChart=function(){var a=HighTables.charts.line=[];function d(i,h){var g=h.labelColumn||0;return i.getColumnData(0,{numeric:false})}function b(k,g){var j=[];var l=g.valueColumns;if(l){for(var h=0;h<l.length;++h){j.push({name:k.getColumnHeader(l[h]),data:k.getColumnData(l[h])})}}else{for(var h=1;h<k.columnCount();h++){j.push({name:k.getColumnHeader(h),data:k.getColumnData(h)})}}return j}function c(k,j,h){h=h||{};var g=d(k,h);var i=b(k,h);a.push(new Highcharts.Chart($.extend(true,{chart:{backgroundColor:"transparent",renderTo:j[0],type:"line"},xAxis:{categories:g},yAxis:{title:false},title:false,series:i},h)))}function f(h,g){var i=new HighTables.Chart(h);var j=new HighTables.Table(i.getTable()[0]);return c(j,i.element,$.extend({},i.options(),g))}function e(h,g){var i=new HighTables.Table(h);return c(i,i.getOrCreateChart(),$.extend({},i.options(),g))}return{renderTo:f,renderFromTable:e}}();HighTables.BarChart=function(){var b=HighTables.charts.bar=[];function d(g){return g.getRowData(0,{numeric:false})}function a(j){var h=[];for(var g=1;g<j.rowCount();g++){h.push({name:j.getRowHeader(g),data:j.getRowData(g)})}return h}function c(k,j,h){h=h||{};var g=d(k);var i=a(k);b.push(new Highcharts.Chart($.extend(true,{chart:{backgroundColor:"transparent",renderTo:j[0],type:"bar"},xAxis:{categories:g},yAxis:{title:false},title:false,series:i},h)))}function f(h,g){var i=new HighTables.Chart(h);var j=new HighTables.Table(h.getTable()[0]);return c(j,i.element,$.extend({},i.options(),g))}function e(h,g){var i=new HighTables.Table(h);return c(i,i.getOrCreateChart(),$.extend({},i.options(),g))}return{renderTo:f,renderFromTable:e}}();HighTables.PieChart=function(){var h=HighTables.charts.pie=[];function b(j){return j.firstRow().find("th:last").text()}function c(j){return $(j).find("td:first").text()}function d(j){return HighTables.Parse.number($(j).find("td:last").text())}function f(j){return j.bodyRows().map(function(){var k=c(this);var l=d(this);return[[k,l]]})}function i(k){var j=b(k);var l=f(k);return[{type:"pie",name:j,data:l}]}function a(m,l,j){j=j||{};var k=i(m);h.push(new Highcharts.Chart($.extend(true,{chart:{backgroundColor:"transparent",renderTo:l[0],type:"pie"},title:false,series:k},j)))}function g(k,j){var l=new HighTables.Chart(k);var m=new HighTables.Table(l.getTable()[0]);return a(m,l.element,$.extend({},l.options(),j))}function e(k,j){var l=new HighTables.Table(k);return a(l,l.getOrCreateChart(),$.extend({},l.options(),j))}return{renderTo:g,renderFromTable:e}}();